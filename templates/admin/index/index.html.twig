{% extends 'admin/base.html.twig' %}

{% block breadcrumbs %}
<div class="grid-x">
    <div class="cell">                                
        <div class="callout callout-breadcrumbs" >
            <ul class="breadcrumbs">
                <li><a href="{{ path('admin.index') }}"><i class="fas fa-home"></i> 后台首页</a></li>
                <li><a href="">后台首页</a></li>                                
                <li>
                    <span class="show-for-sr">Current: </span> 后台首页
                </li>
            </ul>
        </div>
    </div>
</div>
{% endblock %}
{% block extra %}
<script>
    const indexURL = baseURL + "/api/admin"
    httpRequest('get', indexURL).then(()=>{
        layer.closeAll()
    })

    /*axiosInstance.get(indexURL)
        .then((response) => {
            let data = response.data
            if (data.code != 0) {
                if (data.code === 40001) {

                } else {
                    layer.msg(data.msg)
                }
            } else {
                layer.load(2)
                let tr = data.data.map((v) => {
                   return `
                        <tr class="text-center">
                            <td>${v.username}</td>
                            <td>${v.role_id}</td>
                            <td>${v.descript}</td>
                            <td>
                                <div class="switch small">
                                    <input class="switch-input" id="yes-no-${v.id}" type="checkbox" data-id="${v.id}" data-href="${statusURL}" ${v.is_enabled ? "checked" : ""}>
                                    <label class="switch-paddle" for="yes-no-${v.id}">
                                        <span class="show-for-sr">状态?</span>
                                        <span class="switch-active" aria-hidden="true">启用</span>
                                        <span class="switch-inactive" aria-hidden="true">禁用</span>
                                    </label>
                                </div>
                            </td>
                            <td>
                                <a class="hollow button small margin-bottom-0 padding-tb href-edit" href="${editURL}/${v.id}">
                                        <i class="fas fa-edit"></i>
                                    编辑</a>                           
                                    <button class="hollow button small alert margin-bottom-0 padding-tb ajax-delete" data-title="是否确认删除？" data-id="${v.id}" data-href="${deleteURL}">
                                        <i class="far fa-trash-alt"></i>
                                        删除</button>
                            </td>
                        </tr>
                    `
                })                
                //$("#tbody").html(tr.join(''))
                document.querySelector("tbody").innerHTML = tr.join('')
                layer.closeAll()
            }
        })
        .catch((error) => {
            console.log(error)
        })
    */    
</script>
{% endblock %}